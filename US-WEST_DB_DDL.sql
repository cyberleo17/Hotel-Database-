-- MySQL Script generated by MySQL Workbench
-- Wed Nov 15 19:03:21 2023
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

##########################
-- CREATED BY:	
-- NICOLE STEFFENS
-- FRANKIE CHINA QUINTERO
-- CHING CHONG YI
-- JASPREET SINGH
-- VITO ANDIKA MULIA
##########################

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `mydb` DEFAULT CHARACTER SET utf8mb3 ;
USE `mydb` ;

-- -----------------------------------------------------
-- Table `mydb`.`manager`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`manager` (
  `maID` CHAR(10) NOT NULL,
  `maFirst` VARCHAR(25) NOT NULL,
  `maLast` VARCHAR(25) NOT NULL,
  `maDOB` DATE NOT NULL,
  `maAge` INT NOT NULL,
  `maSalary` DECIMAL(10,2) NOT NULL,
  `maBonus` DECIMAL(4,2) NULL DEFAULT NULL,
  `htID` CHAR(15),
  PRIMARY KEY (`maID`),
  UNIQUE INDEX `maID_UNIQUE` (`maID` ASC) VISIBLE)
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `mydb`.`hotel`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`hotel` (
  `maID` CHAR(10) NOT NULL,
  `htAddress` VARCHAR(45) NOT NULL,
  `htNumOfRooms` INT NOT NULL,
  `htID` CHAR(15) NOT NULL,
  PRIMARY KEY (`htID`),
  UNIQUE INDEX `htID_UNIQUE` (`htID` ASC) VISIBLE,
  INDEX `maID_idx` (`maID` ASC) VISIBLE,
  CONSTRAINT `maID`
    FOREIGN KEY (`maID`)
    REFERENCES `mydb`.`manager` (`maID`))
ENGINE = InnoDB;

######CYCLIC REFERENCE#########################
ALTER TABLE manager
ADD FOREIGN KEY (htID) REFERENCES hotel (htID);
######CYCLIC REFERENCE#########################

-- -----------------------------------------------------
-- Table `mydb`.`suite`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`suite` (
  `htID` CHAR(15) NOT NULL,
  `sutNumber` INT NOT NULL,
  `suiteNoOfBeds` INT NOT NULL,
  PRIMARY KEY (`htID`, `sutNumber`),
  UNIQUE INDEX `sutNumber_UNIQUE` (`sutNumber` ASC) VISIBLE,
  INDEX `htID_idx` (`htID` ASC) VISIBLE,
  CONSTRAINT `htID`
    FOREIGN KEY (`htID`)
    REFERENCES `mydb`.`hotel` (`htID`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb3;

-- -----------------------------------------------------
-- Table `mydb`.`hotelclient`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`hotelclient` (
  `hcID` CHAR(10) NOT NULL,
  `hcFirst` VARCHAR(25) NOT NULL,
  `hcLast` VARCHAR(25) NOT NULL,
  `hcAddress` VARCHAR(45) NULL DEFAULT NULL,
  `referredBy` CHAR(10),
  PRIMARY KEY (`hcID`),
  UNIQUE INDEX `hcID_UNIQUE` (`hcID` ASC) VISIBLE,
  INDEX `fk_hcID_idx` (`referredBy` ASC) VISIBLE,
  CONSTRAINT `fk_hcID`
    FOREIGN KEY (`referredBy`)
    REFERENCES `mydb`.`hotelclient` (`hcID`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb3;

-- -----------------------------------------------------
-- Table `mydb`.`booking`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`booking` (
  `htID` CHAR(15) NOT NULL,
  `sutNumber` INT NOT NULL,
  `hcID` VARCHAR(45) NOT NULL,
  `bkCheckInDate` DATE NOT NULL,
  `bkCheckOutDate` DATE NOT NULL,
  PRIMARY KEY (`htID`, `sutNumber`, `hcID`),
  INDEX `htID, sutNumber_idx` (`htID` ASC, `sutNumber` ASC) VISIBLE,
  INDEX `hcID_idx` (`hcID` ASC) VISIBLE,
  CONSTRAINT `fk_htID, fk_sutNumber`
    FOREIGN KEY (`htID` , `sutNumber`)
    REFERENCES `mydb`.`suite` (`htID` , `sutNumber`),
  CONSTRAINT `hcID`
    FOREIGN KEY (`hcID`)
    REFERENCES `mydb`.`hotelclient` (`hcID`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb3;

-- -----------------------------------------------------
-- Table `mydb`.`staff`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`staff` (
  `stID` CHAR(10) NOT NULL,
  `stFirst` VARCHAR(25) NOT NULL,
  `stLast` VARCHAR(25) NOT NULL,
  PRIMARY KEY (`stID`),
  UNIQUE INDEX `stID_UNIQUE` (`stID` ASC) VISIBLE)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb3;

-- -----------------------------------------------------
-- Table `mydb`.`cleans`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`cleans` (
  `htID` CHAR(15) NOT NULL,
  `sutNumber` INT NOT NULL,
  `stID` CHAR(10) NOT NULL,
  PRIMARY KEY (`htID`, `sutNumber`, `stID`),
  INDEX `stID_idx` (`stID` ASC) VISIBLE,
  CONSTRAINT `htID, sutNumber`
    FOREIGN KEY (`htID` , `sutNumber`)
    REFERENCES `mydb`.`suite` (`htID` , `sutNumber`),
  CONSTRAINT `stID`
    FOREIGN KEY (`stID`)
    REFERENCES `mydb`.`staff` (`stID`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb3;

-- -----------------------------------------------------
-- Table `mydb`.`maphonenum`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`maphonenum` (
  `maID` CHAR(10) NOT NULL,
  `maPhoneNumAttr` CHAR(10) NOT NULL,
  PRIMARY KEY (`maID`, `maPhoneNumAttr`),
  UNIQUE INDEX `maID_UNIQUE` (`maID` ASC) VISIBLE,
  INDEX `fk_maPhoneNum_manager1_idx` (`maID` ASC) VISIBLE,
  CONSTRAINT `fk_maID`
    FOREIGN KEY (`maID`)
    REFERENCES `mydb`.`manager` (`maID`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb3;

SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;

###############INSERTION BELOW HERE#####################

###########################
SET FOREIGN_KEY_CHECKS = 0;
###########################

INSERT INTO manager (maID, maFirst, maLast, maDOB, maAge, maSalary, maBonus, htID) VALUES ('0508200101','Joe','Smith','1983-11-23', '20', '60000.00', '0','000000000000114');
INSERT INTO manager (maID, maFirst, maLast, maDOB, maAge, maSalary, maBonus, htID) VALUES ('0508200103', 'John','Smith','1970-01-23', '33', '75000.00', '32.00','000000000000682');
insert into manager (maID, maFirst, maLast, maDOB, maAge, maSalary, maBonus, htID) values ('0508200123', 'Michael', 'Scott', '1960-08-01', '29', '120000.00', '50.00','000000000000734');
insert into manager (maID, maFirst, maLast, maDOB, maAge, maSalary, maBonus, htID) values ('3952950288', 'John', 'Mark', '1975-12-11', '46', '45000.00', '30.00','000000000000185');
insert into manager (maID, maFirst, maLast, maDOB, maAge, maSalary, maBonus, htID) values ('1439668334', 'Rachel', 'Fredrick', '1984-01-22', '21', '57000.00', '35.00','000000000002004');
insert into manager (maID, maFirst, maLast, maDOB, maAge, maSalary, maBonus, htID) values ('1005003327', 'Creed', 'Rock', '1974-05-19', '42.00', '90000.00', '40.00','000000000000552');

####DERIVED ATTRIBUTE maAge################################
SET SQL_SAFE_UPDATES = 0;
	UPDATE manager
	SET maAge = TIMESTAMPDIFF(YEAR, maDOB, CURDATE()) 
	WHERE maDOB IS NOT NULL;
SET SQL_SAFE_UPDATES = 1;
####DERIVED ATTRIBUTE maAge################################

INSERT INTO hotel (htID, htAddress, htNumOfRooms, maID) VALUES ('000000000000114', '2520 S Plaza Dr', 170, '0508200101');
INSERT INTO hotel (htID, htAddress, htNumOfRooms, maID) VALUES ('000000000000682', '227 E Bell Rd', 250, '0508200103');
INSERT INTO hotel (htID, htAddress, htNumOfRooms, maID) VALUES ('000000000000734', '225 University Dr', 70, '0508200123');
INSERT INTO hotel (htID, htAddress, htNumOfRooms, maID) VALUES ('000000000000185',  '103 Cactus Rd', 95, '3952950288'); 
INSERT INTO hotel (htID, htAddress, htNumOfRooms, maID) VALUES ('000000000002004',  '926 Shea Ln', 135, '1439668334'); 
INSERT INTO hotel (htID, htAddress, htNumOfRooms, maID) VALUES ('000000000000552',  '103 Coyote Rd', 200, '1005003327');

###########################
SET FOREIGN_KEY_CHECKS = 1;
###########################

INSERT INTO suite (htID,sutNumber,suiteNoOfBeds) VALUES ('000000000000114', '647', '3'); ##F add 9
INSERT INTO suite (htID,sutNumber,suiteNoOfBeds) VALUES ('000000000000114', '648', '2'); ##F add 10
INSERT INTO suite (htID,sutNumber,suiteNoOfBeds) VALUES ('000000000000682', '511', '1'); ##F add 11
INSERT INTO suite (htID,sutNumber,suiteNoOfBeds) VALUES ('000000000000682', '512', '4'); ##F add 12
INSERT INTO suite (htID,sutNumber,suiteNoOfBeds) VALUES ('000000000000734', '135', '2');
INSERT INTO suite (htID,sutNumber,suiteNoOfBeds) VALUES ('000000000000185', '264', '3'); 
INSERT INTO suite (htID,sutNumber,suiteNoOfBeds) VALUES ('000000000002004', '763', '1'); 
INSERT INTO suite (htID,sutNumber,suiteNoOfBeds) VALUES ('000000000000552', '577', '3'); 
#ht 734
INSERT INTO suite (htID,sutNumber,suiteNoOfBeds) VALUES ('000000000000734', '136', '3'); ##F add 1
INSERT INTO suite (htID,sutNumber,suiteNoOfBeds) VALUES ('000000000000734', '137', '4'); ##F add 2
INSERT INTO suite (htID,sutNumber,suiteNoOfBeds) VALUES ('000000000000734', '138', '2');
#ht 185
INSERT INTO suite (htID,sutNumber,suiteNoOfBeds) VALUES ('000000000000185', '265', '3'); ##F add 3
INSERT INTO suite (htID,sutNumber,suiteNoOfBeds) VALUES ('000000000000185', '267', '2'); 
INSERT INTO suite (htID,sutNumber,suiteNoOfBeds) VALUES ('000000000000185', '268', '4'); ##F add 4
INSERT INTO suite (htID,sutNumber,suiteNoOfBeds) VALUES ('000000000000185', '269', '3'); 
#ht 2004 
INSERT INTO suite (htID,sutNumber,suiteNoOfBeds) VALUES ('000000000002004', '764', '1'); 
INSERT INTO suite (htID,sutNumber,suiteNoOfBeds) VALUES ('000000000002004', '765', '4'); 
INSERT INTO suite (htID,sutNumber,suiteNoOfBeds) VALUES ('000000000002004', '766', '4'); ##F add 5
INSERT INTO suite (htID,sutNumber,suiteNoOfBeds) VALUES ('000000000002004', '767', '2'); ##F add 6
#ht 552
INSERT INTO suite (htID,sutNumber,suiteNoOfBeds) VALUES ('000000000000552', '578', '3'); ##F add 7
INSERT INTO suite (htID,sutNumber,suiteNoOfBeds) VALUES ('000000000000552', '579', '3'); ##F add 8
INSERT INTO suite (htID,sutNumber,suiteNoOfBeds) VALUES ('000000000000552', '580', '3'); 
INSERT INTO suite (htID,sutNumber,suiteNoOfBeds) VALUES ('000000000000552', '581', '4'); 
INSERT INTO suite (htID,sutNumber,suiteNoOfBeds) VALUES ('000000000000552', '582', '4'); 

INSERT INTO staff (stID,stFirst,stLast) VALUES ('12345', 'Frank', 'China');
INSERT INTO staff (stID,stFirst,stLast) VALUES ('67890', 'Isaac', 'Newton');
INSERT INTO staff (stID,stFirst,stLast) VALUES ('01472', 'Albert', 'Einstein');
INSERT INTO staff (stID,stFirst,stLast) VALUES ('20593', 'Nick', 'Colombia');
INSERT INTO staff (stID,stFirst,stLast) VALUES ('20997', 'Ally', 'Newsmith');
INSERT INTO staff (stID,stFirst,stLast) VALUES ('14938', 'Tyler', 'Edwards');
INSERT INTO staff (stID,stFirst,stLast) VALUES ('19257', 'Jimmy', 'Butter');
INSERT INTO staff (stID,stFirst,stLast) VALUES ('20206', 'Han', 'Valen');
INSERT INTO staff (stID,stFirst,stLast) VALUES ('12346', 'Jon', 'Bovi');
INSERT INTO staff (stID,stFirst,stLast) VALUES ('14947', 'Elton', 'John');
INSERT INTO staff (stID,stFirst,stLast) VALUES ('17351', 'Cthepen', 'Surry');

insert into hotelclient (hcID, hcFirst, hcLast, hcAddress, referredBy) values ('0000000001', 'Nikki', 'Stefan', '1234 E Home Street',NULL); #referredBy no one
insert into hotelclient (hcID, hcFirst, hcLast, hcAddress, referredBy) values ('0000000002', 'Alex', 'Bruce', '6482 N Waterfall Road', '0000000001');
insert into hotelclient (hcID, hcFirst, hcLast, hcAddress, referredBy) values ('0000000004', 'Scarlett', 'Buble', '9411 S Northsight Lane', '0000000002');
insert into hotelclient (hcID, hcFirst, hcLast, hcAddress, referredBy) values ('0000000005', 'Patrick', 'Star', '1992 S Rock Way',NULL);
insert into hotelclient (hcID, hcFirst, hcLast, hcAddress, referredBy) values ('0000000006', 'Sandy', 'Cheeks', '234 W Bikini Bottom', '0000000005');

insert into booking (htID, hcID, sutNumber, bkCheckInDate, bkCheckOutDate) values ('000000000000734', '0000000001', '135', '2024-01-07', '2024-01-13');
insert into booking (htID, hcID, sutNumber, bkCheckInDate, bkCheckOutDate) values ('000000000000185', '0000000004', '264', '2024-01-17', '2024-01-22');
insert into booking (htID, hcID, sutNumber, bkCheckInDate, bkCheckOutDate) values ('000000000000552', '0000000002', '577', '2024-02-01', '2024-02-07');
insert into booking (htID, hcID, sutNumber, bkCheckInDate, bkCheckOutDate) values ('000000000000185', '0000000001', '264', '2024-01-24', '2024-01-29');
insert into booking (htID, hcID, sutNumber, bkCheckInDate, bkCheckOutDate) values ('000000000000734', '0000000005', '136', '2024-01-21', '2024-01-30');
insert into booking (htID, hcID, sutNumber, bkCheckInDate, bkCheckOutDate) values ('000000000000734', '0000000006', '137', '2024-01-17', '2024-01-25');
insert into booking (htID, hcID, sutNumber, bkCheckInDate, bkCheckOutDate) values ('000000000000185', '0000000006', '265', '2024-01-27', '2024-01-30');
insert into booking (htID, hcID, sutNumber, bkCheckInDate, bkCheckOutDate) values ('000000000000185', '0000000002', '268', '2024-01-21', '2024-01-25');
insert into booking (htID, hcID, sutNumber, bkCheckInDate, bkCheckOutDate) values ('000000000002004', '0000000004', '766', '2024-06-04', '2024-06-15');
insert into booking (htID, hcID, sutNumber, bkCheckInDate, bkCheckOutDate) values ('000000000002004', '0000000005', '767', '2024-06-04', '2024-06-13');
insert into booking (htID, hcID, sutNumber, bkCheckInDate, bkCheckOutDate) values ('000000000000552', '0000000001', '578', '2024-08-24', '2024-08-26');
insert into booking (htID, hcID, sutNumber, bkCheckInDate, bkCheckOutDate) values ('000000000000552', '0000000004', '579', '2024-08-26', '2024-08-30');
insert into booking (htID, hcID, sutNumber, bkCheckInDate, bkCheckOutDate) values ('000000000000114', '0000000002', '647', '2024-04-26', '2024-04-30');
insert into booking (htID, hcID, sutNumber, bkCheckInDate, bkCheckOutDate) values ('000000000000114', '0000000004', '648', '2024-07-05', '2024-07-13');
insert into booking (htID, hcID, sutNumber, bkCheckInDate, bkCheckOutDate) values ('000000000000682', '0000000005', '511', '2024-07-10', '2024-07-19');
insert into booking (htID, hcID, sutNumber, bkCheckInDate, bkCheckOutDate) values ('000000000000682', '0000000006', '512', '2024-02-10', '2024-02-19');

INSERT INTO cleans (htID, sutNumber, stID) VALUES
('000000000000682', '512', '12345'),
('000000000000185', '264', '20206'),
('000000000000734', '135', '17351'),
('000000000000552', '577', '20997'),
('000000000000734', '136', '17351'),
('000000000000734', '137', '17351'),
('000000000002004', '766', '20997'),
('000000000002004', '767', '20997'),
('000000000000552', '578', '14947'),
('000000000000552', '579', '14947');

select * from manager;
select * from hotel;
select * from suite;
select * from staff;
select * from cleans;
select * from hotelclient;
select * from booking;